<div ng-controller="UserDashboardController as vm" ng-init="vm.init()">
  <!-- Navbar (Bootstrap-based) -->
  <nav class="navbar navbar-default">
    <div class="container">
      <div class="navbar-header">
        <a ui-sref="buyerHome" class="navbar-brand">
          <img src="https://media.istockphoto.com/id/1332607862/vector/car-rental-logo-template-design.jpg?s=612x612&w=0&k=20&c=Z7HXnGff9rQIvLWgrYT0E8oge2NMlLg5v0ZB1dCe4zM=" alt="RentO Logo" height="40">
        </a>
        <button type="button" class="navbar-toggle" ng-click="isNavOpen = !isNavOpen">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse" uib-collapse="isNavOpen">
        <ul class="nav navbar-nav">
          <!-- Buyer Navigation -->
          <li ng-if="vm.userProfile.user_role.indexOf('buyer') > -1">
            <a ui-sref="buyerHome" ng-class="{active: $state.includes('buyerHome')}">Browse Cars</a>
          </li>
          <li ng-if="vm.userProfile.user_role.indexOf('buyer') > -1">
            <a ui-sref="buyerBookings" ng-class="{active: $state.includes('buyerBookings')}">Your Bookings</a>
          </li>
          <!-- Seller Navigation -->
          <li ng-if="vm.userProfile.user_role.indexOf('seller') > -1">
            <a ui-sref="sellerDashboard" ng-class="{active: $state.includes('sellerDashboard')}">Dashboard</a>
          </li>
          <li ng-if="vm.userProfile.user_role.indexOf('seller') > -1">
            <a ui-sref="sellerListings" ng-class="{active: $state.includes('sellerListings')}">My Listings</a>
          </li>
          <li ng-if="vm.userProfile.user_role.indexOf('seller') > -1">
            <a ui-sref="sellerBookings" ng-class="{active: $state.includes('sellerBookings')}">Bookings</a>
          </li>
          <li ng-if="vm.userProfile.user_role.indexOf('seller') > -1">
            <a ui-sref="sellerAnalytics" ng-class="{active: $state.includes('sellerAnalytics')}">Reports</a>
          </li>
          <!-- Common Navigation -->
          <li>
            <a ui-sref="conversations" ng-class="{active: $state.includes('conversations')}">Messages</a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a ui-sref="userDashboard">
              <img ng-src="{{ vm.userProfile.photoURL || 'https://photosking.net/wp-content/uploads/2024/05/no-dp-pic_23.webp' }}" alt="Profile" class="img-circle" style="width:40px; height:40px;">
              {{ vm.userProfile.first_name || 'Profile' }}
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Profile Panel -->
  <div class="container" style="margin-top:70px;">
    <div class="panel panel-default">
      <div class="panel-heading clearfix">
        <h3 class="panel-title pull-left">User Profile</h3>
        <div class="pull-right" ng-if="vm.userProfile.user_role.indexOf('seller') > -1">
          <span class="label label-success" style="margin-right:10px;">Seller Account</span>
          <button class="btn btn-primary btn-xs" ng-click="vm.goToSellerDashboard()">Go to Seller Dashboard</button>
        </div>
      </div>
      <div class="panel-body">
        <div class="row">
          <!-- Profile Image Section -->
          <div class="col-sm-4 text-center">
            <img ng-src="{{ vm.userProfile.photoURL || 'https://photosking.net/wp-content/uploads/2024/05/no-dp-pic_23.webp' }}" alt="Profile Image" class="img-circle img-responsive" style="max-width:200px;">
          </div>
          <!-- Profile Details Section -->
          <div class="col-sm-8">
            <div class="list-group">
              <div class="list-group-item" ng-if="vm.userProfile.username">
                <strong>Username:</strong> {{ vm.userProfile.username }}
              </div>
              <div class="list-group-item">
                <strong>Email:</strong> {{ vm.userProfile.email }}
              </div>
              <div class="list-group-item" ng-if="vm.userProfile.first_name">
                <strong>First Name:</strong> {{ vm.userProfile.first_name }}
              </div>
              <div class="list-group-item" ng-if="vm.userProfile.last_name">
                <strong>Last Name:</strong> {{ vm.userProfile.last_name }}
              </div>
              <div class="list-group-item" ng-if="vm.userProfile.phone">
                <strong>Phone Number:</strong> {{ vm.userProfile.phone }}
              </div>
              <div class="list-group-item" ng-if="vm.userProfile.address">
                <strong>Address:</strong>
                <div ng-if="vm.userProfile.address.line1">{{ vm.userProfile.address.line1 }}</div>
                <div ng-if="vm.userProfile.address.line2">{{ vm.userProfile.address.line2 }}</div>
                <div ng-if="vm.userProfile.address.city">{{ vm.userProfile.address.city }}</div>
                <div ng-if="vm.userProfile.address.state">{{ vm.userProfile.address.state }}</div>
                <div ng-if="vm.userProfile.address.pincode">{{ vm.userProfile.address.pincode }}</div>
              </div>
            </div>
            <button class="btn btn-danger" ng-click="vm.logout()">Logout</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
